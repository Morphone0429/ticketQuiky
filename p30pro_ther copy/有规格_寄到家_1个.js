auto();let config={frequency:"NORMAL",singleMode:true,sixMode:false,sendToHome:true,goMarkGet:false,orcSleepTime:200};const point={originSixModePoint:{x:596,y:1086},originSingleModePoint:{x:214,y:1086},originSendToHomePoint:{x:137,y:!config.sixMode&&!config.singleMode?1062:1382},originGoMarkGetPoint:{x:378,y:!config.sixMode&&!config.singleMode?1062:1382},originAcountAddPoint:{x:1000,y:!config.sixMode&&!config.singleMode?1566:1894},originalQuickBtnPointWithOutCarPoint:{x:635,y:2247.0},originalQuickBtnPointWithCarPoint:{x:853,y:2247.0},originSurePoint:{x:541,y:2153.0},originSureInfoAndPayPoint:{x:840,y:2248.0},originThisMarkPoint:{x:541,y:1530.0},originNoProdPoint:{x:541,y:1233.0},originknowMailPoint:{x:541,y:1490.0},originBackScreenPoint:{x:60,y:165.0}};const state={initBuyConfig:false,buyMethod:"home",enterSureLoop:false,loopCount:0};let main=()=>{requestScreenCapture();if(_0xdb90d())return;_0x_0x561();function _0x_0x561(){console.log("程序开始执行");console.log("当前用户设置的初始化购买配置",{config,state});console.log("查找立即购买按钮");threads.start(function(){log("\u5237\u65B0\u786E\u5B9A\u6309\u94AE\u81EA\u52A8\u70B9\u51FB\u7EBF\u7A0B\u5DF2\u542F\u52A8");let i=0;while(true){i++;let _0x3_0xd4d=_0xgac(100);let{hasQuickBuyBtn,quickBuyScreen,chooseDetailScreen,markListScreen,makeSureOrderScreen}=_0x3e86c(_0x3_0xd4d);console.log("立即购买,即将进入选择规格和购买方式页面",i,_0x3_0xd4d,hasQuickBuyBtn,quickBuyScreen,chooseDetailScreen,makeSureOrderScreen);if(chooseDetailScreen){console.log("\u8FDB\u5165\u8D2D\u4E70\u9875\u9762\uFF0C\u5F00\u59CB\u521D\u59CB\u5316\u8D2D\u4E70\u914D\u7F6E\uFF0C\u5E76\u6253\u65AD\u5F53\u524D\u5B50\u7EBF\u7A0B");_0xf18c9b();break;}if(makeSureOrderScreen){console.log("开始确认订单循环，并打断当前子线程");_0xf15bbe();break;}if(markListScreen){click(point.originBackScreenPoint);}if(hasQuickBuyBtn&&quickBuyScreen){if(_0x3_0xd4d.includes("\u52A0\u5165\u8D2D\u7269\u8F66")){click(point.originalQuickBtnPointWithCarPoint);sleep(config.orcSleepTime);}if(!_0x3_0xd4d.includes("\u52A0\u5165\u8D2D\u7269\u8F66")){click(point.originalQuickBtnPointWithOutCarPoint);sleep(config.orcSleepTime);}}}});}function _0xf18c9b(){function _0x994f2a(){if(state.initBuyConfig){_0x724c();return;}let _0x959f=({_point,buyMethod})=>{if(config.sixMode){console.log("选择了6个盲盒",point.originSixModePoint);click(point.originSixModePoint.x,point.originSixModePoint.y);}else if(config.singleMode){console.log("\u9009\u62E9\u4E86\u0031\u4E2A\u76F2\u76D2",point.originSingleModePoint);click(point.originSingleModePoint.x,point.originSingleModePoint.y);}state.buyMethod=buyMethod;click(_point.x,_point.y);state.initBuyConfig=true;_0x724c();};if(config.sendToHome&&!config.goMarkGet){_0x959f({_point:point.originSendToHomePoint,buyMethod:"\u0068\u006F\u006D\u0065"});}if(!config.sendToHome&&config.goMarkGet||config.sendToHome&&config.goMarkGet){_0x959f({_point:point.originGoMarkGetPoint,buyMethod:"mark"});}}_0x994f2a();}function _0x724c(){_0x885e5d({callBack:mode=>{console.log(mode,"是否有商品 且是想要抢购的购买方式",mode==="\u006E\u006F\u0050\u0072\u006F\u0064"?"\u0020\u6CA1\u6709":"\u6709");if(mode==="\u0068\u0061\u0073\u0050\u0072\u006F\u0064"){console.log("刷到了 点击进入确认信息页面  开始进行循环点击 <确认-就是这家-我知道了-确认> 模式");_0x6ed1e();}if(mode==="\u006E\u006F\u0050\u0072\u006F\u0064"){console.log("\u6CA1\u6709\u5E93\u5B58\uFF0C\u7EE7\u7EED\u5FAA\u73AF\u5237\u65B0");if(state.buyMethod==="\u006D\u0061\u0072\u006B"){state.buyMethod="\u0068\u006F\u006D\u0065";click(point.originSendToHomePoint.x,point.originSendToHomePoint.y);_0xe863f();_0x724c();}if(state.buyMethod==="\u0068\u006F\u006D\u0065"){state.buyMethod="\u006D\u0061\u0072\u006B";click(point.originGoMarkGetPoint.x,point.originGoMarkGetPoint.y);_0xe863f();_0x724c();}}},patchStep:"\u0063\u0068\u006F\u006F\u0073\u0065\u0044\u0065\u0074\u0061\u0069\u006C"});}function _0x6ed1e(){state.loopCount++;console.log("\u5FAA\u73AF\u7684\u6B21\u6570",state.loopCount);click(point.originSurePoint.x,point.originSurePoint.y);_0xf15bbe();}function _0xf15bbe(){state.enterSureLoop=true;console.log("\u7B49\u5F85\u786E\u8BA4\u8BA2\u5355\u9875\u9762\u52A0\u8F7D\u002E\u002E\u002E");console.log("是否进入循环",state.enterSureLoop);_0xe863f();_0x885e5d({patchStep:"\u006D\u0061\u006B\u0065\u0053\u0075\u0072\u0065\u004F\u0072\u0064\u0065\u0072",callBack:mode=>{console.log(mode,"确认信息");if(mode==="\u006D\u0061\u006B\u0065\u0053\u0075\u0072\u0065\u004F\u0072\u0064\u0065\u0072"){click(point.originSureInfoAndPayPoint.x,point.originSureInfoAndPayPoint.y);_0xf15bbe();}if(mode==="\u0074\u0068\u0069\u0073\u004F\u006E\u0065"){click(point.originThisMarkPoint.x,point.originThisMarkPoint.y);_0xf15bbe();}if(mode==="\u0073\u0075\u0072\u0065\u004D\u0061\u0069\u006C"){click(point.originknowMailPoint.x,point.originknowMailPoint.y);_0xf15bbe();}if(mode==="\u006B\u006E\u006F\u0077\u006E"){click(point.originNoProdPoint.x,point.originNoProdPoint.y);_0xf15bbe();}if(mode==="\u006E\u0065\u0078\u0074\u004C\u006F\u006F\u0070\u0053\u0074\u0061\u0072\u0074"){_0x6ed1e();}}});}function _0xe863f(){if(config.frequency==="\u0049\u004D\u004D\u0045\u0044\u0049\u0041\u0054\u0045"){sleep(20);}if(config.frequency==="\u0056\u0045\u0052\u0059\u005F\u0046\u0041\u0053\u0054"){sleep(20,130);}if(config.frequency==="FAST"){sleep(130,230);}if(config.frequency==="\u004E\u004F\u0052\u004D\u0041\u004C"){sleep(230,500);}if(config.frequency==="SLOW"){sleep(500,860);}if(config.frequency==="VERY_SLOW"){sleep(860,1500);}}function _0x3e86c(currentScreenOcr){let _0xgbcad=currentScreenOcr.includes("购物车");let _0x54e1a=currentScreenOcr.includes("自堤门店列表");let _0x4_0xaec=currentScreenOcr.includes("购买方式");let _0x5_0x63d=currentScreenOcr.some(item=>item.includes("\u786E\u8BA4\u4FE1\u606F"));let _0x3309e=currentScreenOcr.includes("\u7ACB\u5373\u8D2D\u4E70");return{quickBuyScreen:_0xgbcad,chooseDetailScreen:_0x4_0xaec,makeSureOrderScreen:_0x5_0x63d,hasQuickBuyBtn:_0x3309e,markListScreen:_0x54e1a};}function _0x885e5d({callBack,patchStep,_wait}){let _0x6c7b=_0xgac();let{quickBuyScreen,chooseDetailScreen,makeSureOrderScreen,markListScreen}=_0x3e86c(_0x6c7b);let _0x90bdb=_wait?_wait:0;function _0x2_0x0ba(){console.log("\u002D\u002D\u002D\u002D\u002D\u002D\u002D\u002D\u002D\u002D\u002D\u002D\u002D\u002D\u002D\u002D\u9700\u8981\u8FDB\u884C\u515C\u5E95\u5417\uFF1F");if(patchStep==="\u006D\u0061\u006B\u0065\u0053\u0075\u0072\u0065\u004F\u0072\u0064\u0065\u0072"&&makeSureOrderScreen){device.vibrate(200);}sleep(config.orcSleepTime+_0x90bdb);_0x885e5d({callBack,patchStep});return;}console.log("\u5F53\u524D\u7684\u6B65\u9AA4\u548C\u76D1\u542C\u5230\u7684\u9875\u9762\u662F",{patchStep,quickBuyScreen,chooseDetailScreen,makeSureOrderScreen});if(markListScreen){click(point.originBackScreenPoint);}if(patchStep==="\u0071\u0075\u0069\u0063\u006B\u0042\u0075\u0079"){if(quickBuyScreen){if(_0x6c7b.includes("\u52A0\u5165\u8D2D\u7269\u8F66")&&_0x6c7b.includes("立即购买")){callBack("quickBuyWithCar");return;}if(!_0x6c7b.includes("\u52A0\u5165\u8D2D\u7269\u8F66")&&_0x6c7b.includes("\u7ACB\u5373\u8D2D\u4E70")){callBack("\u0071\u0075\u0069\u0063\u006B\u0042\u0075\u0079\u0057\u0069\u0074\u0068\u006F\u0075\u0074\u0043\u0061\u0072");return;}}}if(patchStep==="\u0063\u0068\u006F\u006F\u0073\u0065\u0044\u0065\u0074\u0061\u0069\u006C"){if(chooseDetailScreen){if(!state.initBuyConfig){callBack("\u0069\u006E\u0069\u0074\u0042\u0075\u0079\u0043\u006F\u006E\u0066\u0069\u0067");return;}if(_0x6c7b.includes("\u786E\u5B9A")){if(config.sendToHome&&!config.goMarkGet){if(state.buyMethod==="\u006D\u0061\u0072\u006B"){callBack("\u006E\u006F\u0050\u0072\u006F\u0064");return;}if(state.buyMethod==="home"){callBack("\u0068\u0061\u0073\u0050\u0072\u006F\u0064");return;}}if(!config.sendToHome&&config.goMarkGet){if(state.buyMethod==="\u006D\u0061\u0072\u006B"){callBack("\u0068\u0061\u0073\u0050\u0072\u006F\u0064");return;}if(state.buyMethod==="\u0068\u006F\u006D\u0065"){callBack("\u006E\u006F\u0050\u0072\u006F\u0064");return;}}if(config.sendToHome&&config.goMarkGet){callBack("hasProd");return;}}if(_0x6c7b.includes("已售罄")||!_0x6c7b.includes("\u786E\u5B9A")){callBack("noProd");return;}}}if(patchStep==="\u006D\u0061\u006B\u0065\u0053\u0075\u0072\u0065\u004F\u0072\u0064\u0065\u0072"){if(chooseDetailScreen){if(_0x6c7b.includes("\u786E\u5B9A")&&state.enterSureLoop){callBack("\u006E\u0065\u0078\u0074\u004C\u006F\u006F\u0070\u0053\u0074\u0061\u0072\u0074");return;}}if(makeSureOrderScreen){if(_0x6c7b.includes("\u5C31\u662F\u8FD9\u5BB6")){callBack("\u0074\u0068\u0069\u0073\u004F\u006E\u0065");return;}if(_0x6c7b.includes("\u786E\u8BA4\u65E0\u8BEF")){callBack("\u0073\u0075\u0072\u0065\u004D\u0061\u0069\u006C");return;}if(_0x6c7b.includes("\u6211\u77E5\u9053\u4E86")){callBack("\u006B\u006E\u006F\u0077\u006E");return;}if(!_0x6c7b.includes("就是这家")||!_0x6c7b.includes("\u6211\u77E5\u9053\u4E86")||!_0x6c7b.includes("\u786E\u8BA4\u65E0\u8BEF")){callBack("\u006D\u0061\u006B\u0065\u0053\u0075\u0072\u0065\u004F\u0072\u0064\u0065\u0072");return;}}console.log(_0x6c7b,"currentScreenOcr");}_0x2_0x0ba();}function _0xgac(wait){let _0x27b68c=wait?wait:config.orcSleepTime;sleep(_0x27b68c);let _0xf4gac=images.captureScreen();let _0x6a92d=[0,0.2,-1,0.6];let _0x67f1bg=ocr(_0xf4gac,_0x6a92d);_0xf4gac.recycle();return _0x67f1bg;}function _0xce_0xdd2(dateStr){const _0xdc7a1f=parseInt(dateStr.slice(0,4));const _0x7c_0xb8c=parseInt(dateStr.slice(4,6))-1;const _0xcb_0xd3d=parseInt(dateStr.slice(6,8));const _0x1d5a=new Date(_0xdc7a1f,_0x7c_0xb8c,_0xcb_0xd3d);return new Date()>_0x1d5a;}function _0xdb90d(){let _0xc6d=["\u0032\u0036\u0062\u0039\u0061\u0034\u0032\u0061\u0036\u0031\u0039\u0065\u0038\u0066\u0038\u0065",'49b18a41f8e87e63'];const _0x6_0x28c=device.getAndroidId();console.log(_0x6_0x28c);const _0x8fb24d="\u0032\u0030\u0032\u0036\u0030\u0035\u0031\u0034";return _0xce_0xdd2(_0x8fb24d)||!_0xc6d.includes(_0x6_0x28c);}};main();